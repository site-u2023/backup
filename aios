#!/bin/sh
# License: CC0
# OpenWrt >= 19.07


# Constants
BASE_URL="https://raw.githubusercontent.com/site-u2023/config-software2/main/"
BASE_DIR="/tmp/config-software2/"
SUPPORTED_VERSIONS="19 21 22 23 24 SN"
LANGUAGE="$1"

run_script() {
    RELEASE_VERSION="$RELEASE_VERSION" SELECTED_LANGUAGE="$SELECTED_LANGUAGE" sh "${BASE_DIR}openwrt-config.sh"
}

# Download and execute scripts
mkdir -p "$BASE_DIR"
wget --no-check-certificate -O "${BASE_DIR}color-code.sh" "${BASE_URL}color-code.sh"
wget --no-check-certificate -O "${BASE_DIR}check-version.sh" "${BASE_URL}check-version.sh"
wget --no-check-certificate -O "${BASE_DIR}check-language.sh" "${BASE_URL}check-language.sh"
wget --no-check-certificate -O "${BASE_DIR}openwrt-config.sh" "${BASE_URL}openwrt-config.sh"

source "${BASE_DR}color-code.sh"
source "${BASE_DR}check-version.sh"
source "${BASE_DR}check-language.sh"

check_version
check_language
run_script
